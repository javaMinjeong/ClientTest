<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- ex29_.timer.html -->
    <!-- 
        타이머, Timer
         1. id setTimeout(할일, 시간)
            - 1회성 타이머

         2. id setInterval(할일, 시간)
            - 반복 타이머

        타이머 종료
         1. void clearTimeout(id)

         2. void clearInterval(id)



     -->

     <h1>타이머</h1>

     <form name="form1">
        <fieldset>
        <legend>setTimeout</legend>
        <input type="button" value="버튼" name="btn1">
        <input type="text" name="txt1">
     </fieldset>

     <fieldset>
        <legend>setInterval</legend>
        <input type="button" value="버튼" name="btn2">
        <input type="text" name="txt2">
     </fieldset>

     <fieldset>
        <legend>setInterval</legend>
        <input type="button" value="시작" name="btn3">
        <input type="button" value="멈춤" name="btn4">
        <input type="text" name="txt3">
     </fieldset>

     </form>

     <hr>

     <img src="../asset/images/catty01.png" name="cat1">


     <script>

        var btn1 = document.form1.btn1;
        var btn2 = document.form1.btn2;
        var btn3 = document.form1.btn3;
        var btn4 = document.form1.btn4;
        
        var txt1 = document.form1.txt1;
        var txt2 = document.form1.txt2;
        var txt3 = document.form1.txt3;

        btn1.onclick = m1;
        function m1(){  //버튼 클릭 > 즉시 호출
            setTimeout(f1, 3000);
        }

        function f1(){ // m1 호출 > 3초 후 > f1호출
            // alert('따르릉');
            txt1.value = (new Date()).toLocaleTimeString();
        }
        
        btn2.onclick = m2;
        function m2(){
            setInterval(f2, 1000);  //1000이면 시계 역할을 함
            
        }
        
        function f2(){
            // alert('따르릉');
            txt2.value = (new Date()).toLocaleTimeString();
        }

        //1. 타이머를 단 1개만 실행하도록.. > 중복 실행 금지 > 보편적
        //2. 타이머를 여러개 호출할 수 있도록.. 


        var n = 1;
        var timer = 0;
        var timerlist = [];

        btn3.onclick = m3;
        function m3(){

            // if(timer == 0){
            //     timer = setInterval(f3, 100);
            //     console.log(timer);
            // }

            timer = setInterval(f3, 100);
            timerlist.push(timer);

            // console.log(timer); 
            //함수를 실행할때마다 변수의 타이머가 생김 유일X > 계속 클릭하면 혼자 하던 일을 여러 타이머가 나눠서 해서 빨라짐
        }

        function f3(){
            txt3.value = n;
            n++;
        }

        btn4.onclick = m4;
        function m4(){
            // clearInterval(타이머ID)
            // clearInterval(timer);
            // timer = 0;
            
            //순차 중지
            // timer = timerlist.pop();
            // clearInterval(timer);

            //일괄 중지
            for(var i=0; i<timerlist; i++){
                clearInterval(timerlist[i]);
            }


        }


        var cat1 = document.images['cat1'];
        var m = 1;
        var ctimer = 0;

        cat1.onclick = m5;
        function m5(){
            
            if(ctimer ==0){
                ctimer = setInterval(f5,100);
            } else{
                clearInterval(ctimer);
                ctimer = 0;     //reset
            }    

            
        }
        function f5(){
            m++;
            if(m>9) m = 1;
            cat1.src = '../asset/images/catty0' + m + '.png';
        }

       
     </script>

</body>
</html>